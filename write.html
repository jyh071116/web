<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css"
    />
    <link rel="stylesheet" href="css/write.css" />
    <link rel="stylesheet" href="css/global.css" />
    <script src="https://cdn.jsdelivr.net/npm/marked@4.0.10/marked.min.js"></script>
    <title>작성</title>
  </head>
  <body>
    <section class="inputbox">
      <input
        class="input-title"
        placeholder="제목을 입력하세요"
        oninput="addTitle(event)"
      />
      <div class="tagcontainer">
        <div class="tagbox"></div>
        <input
          class="input-tag"
          placeholder="태그를 입력하세요"
          onchange="addTag(event)"
          onkeydown="removeTag(event)"
        />
      </div>
      <textarea
        id="markdown-input"
        placeholder="당신의 이야기를 적어주세요..."
        oninput="handleTextareaHeight(event)"
      ></textarea>
    </section>
    <footer>
      <a href="index.html">← 나가기</a
      ><button class="submit" onclick="writePost()">발행하기</button>
    </footer>
    <section class="previewbox">
      <h1 class="title"></h1>
      <div id="preview"></div>
    </section>
    <script src="js/app.js"></script>
    <script src="js/write.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const markdownInput = document.getElementById("markdown-input");
        const preview = document.getElementById("preview");

        marked.setOptions({
          breaks: true,
        });

        markdownInput.addEventListener("input", (event) => {
          const markdownText = event.target.value;
          preview.innerHTML = marked.parse(markdownText);
        });

        preview.innerHTML = marked.parse(markdownInput.value);
      });
    </script>
  </body>
</html>
