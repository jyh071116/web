<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/global.css" />
    <link rel="stylesheet" href="css/index.css" />
    <title>블로그</title>
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css"
    />
  </head>
  <body>
    <header>
      <img class="logo" src="images/logo.svg" alt="로고" />
      <div class="searchbox">
        <input
          class="search"
          placeholder="검색할 내용을 입력해주세요"
          oninput="handleSearch(event)"
        />
        <img src="images/searchicon.svg" class="searchicon" alt="검색아이콘" />
      </div>
      <div class="optionbox">
        <img
          class="searchicon2"
          src="images/searchicon.svg"
          onclick="handleSearchBar(event)"
          alt="검색아이콘"
        />
        <a class="write" href="/write.html">글쓰기</a>
      </div>
    </header>
    <section>
      <div class="gridbox"></div>
    </section>
    <script src="js/app.js"></script>
    <script src="js/header.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const posts = getPosts();
        const gridbox = document.querySelector(".gridbox");

        if (!posts) localStorage.setItem("posts", JSON.stringify([]));

        posts.forEach((post) => {
          gridbox.innerHTML += `<div class="postbox" onclick="location.href = 'detail.html?id=${
            post.id
          }'">
        <h3>${post.title}</h3>
        <p class="date">${post.date}</p>
        <p class="content">${post.content.replace("#", "")}</p>
        <div class="tagbox">
          ${post.tags.map((tag) => `<div class="tag">${tag}</div>`).join("")}
        </div>
      </div>`;
        });
      });
    </script>
  </body>
</html>
